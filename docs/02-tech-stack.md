# 02 - æŠ€æœ¯æ ˆä»‹ç»

æœ¬ç« å°†æ·±å…¥ä»‹ç»é¡¹ç›®ä¸­ä½¿ç”¨çš„æŠ€æœ¯æ ˆï¼Œè§£é‡Šæ¯ä¸ªæŠ€æœ¯çš„é€‰æ‹©ç†ç”±å’Œåœ¨é¡¹ç›®ä¸­çš„ä½œç”¨ã€‚

## ğŸ¯ å­¦ä¹ ç›®æ ‡

- ç†è§£ç°ä»£å…¨æ ˆåº”ç”¨çš„æŠ€æœ¯æ¶æ„
- æŒæ¡å„ä¸ªæŠ€æœ¯çš„æ ¸å¿ƒæ¦‚å¿µå’Œä¼˜åŠ¿
- å­¦ä¼šæŠ€æœ¯é€‰å‹çš„æ€è€ƒæ–¹å¼
- äº†è§£æŠ€æœ¯ä¹‹é—´çš„åä½œå…³ç³»

## ğŸ—ï¸ æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å‰ç«¯å±‚ (Frontend)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Next.js 14+ (App Router) + TypeScript + Tailwind CSS   â”‚
â”‚ React Hook Form + Zod + Zustand + Lucide React         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API å±‚ (API Layer)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           Supabase Client + Server Components           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  åç«¯æœåŠ¡ (Backend)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    Supabase (PostgreSQL + Auth + Realtime + Storage)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ æ ¸å¿ƒæŠ€æœ¯è¯¦è§£

### 1. Next.js 14+ (React æ¡†æ¶)

**é€‰æ‹©ç†ç”±ï¼š**
- ğŸ”¥ **å…¨æ ˆèƒ½åŠ›**: åŒæ—¶æ”¯æŒå‰ç«¯å’Œåç«¯å¼€å‘
- âš¡ **æ€§èƒ½ä¼˜ç§€**: è‡ªåŠ¨ä»£ç åˆ†å‰²ã€å›¾ç‰‡ä¼˜åŒ–ã€é™æ€ç”Ÿæˆ
- ğŸ› ï¸ **å¼€å‘ä½“éªŒ**: çƒ­é‡è½½ã€TypeScript æ”¯æŒã€å†…ç½®ä¼˜åŒ–
- ğŸŒ **SEO å‹å¥½**: æœåŠ¡ç«¯æ¸²æŸ“å’Œé™æ€ç”Ÿæˆ

**æ ¸å¿ƒç‰¹æ€§ï¼š**
```typescript
// App Router ç¤ºä¾‹
// app/page.tsx
export default function HomePage() {
  return <div>Hello World</div>
}

// app/layout.tsx
export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="zh-CN">
      <body>{children}</body>
    </html>
  )
}
```

### 2. TypeScript (ç±»å‹ç³»ç»Ÿ)

**é€‰æ‹©ç†ç”±ï¼š**
- ğŸ›¡ï¸ **ç±»å‹å®‰å…¨**: ç¼–è¯‘æ—¶é”™è¯¯æ£€æŸ¥ï¼Œå‡å°‘è¿è¡Œæ—¶é”™è¯¯
- ğŸ”§ **å¼€å‘ä½“éªŒ**: æ™ºèƒ½æç¤ºã€é‡æ„æ”¯æŒã€ä»£ç å¯¼èˆª
- ğŸ“š **å¯ç»´æŠ¤æ€§**: è‡ªæ–‡æ¡£åŒ–ä»£ç ï¼Œå›¢é˜Ÿåä½œæ›´å®¹æ˜“
- ğŸš€ **ç°ä»£æ ‡å‡†**: ä¸šç•Œä¸»æµé€‰æ‹©

**ç±»å‹å®šä¹‰ç¤ºä¾‹ï¼š**
```typescript
// å®šä¹‰æ•°æ®æ¨¡å‹
interface Todo {
  id: string
  title: string
  description: string | null
  completed: boolean
  created_at: string
  updated_at: string
  user_id: string
}

// å®šä¹‰ç»„ä»¶ Props
interface TodoItemProps {
  todo: Todo
  onUpdate: (id: string, updates: Partial<Todo>) => Promise<void>
  onDelete: (id: string) => Promise<void>
}
```

### 3. Tailwind CSS (æ ·å¼æ¡†æ¶)

**é€‰æ‹©ç†ç”±ï¼š**
- ğŸ¨ **å®ç”¨ä¼˜å…ˆ**: åŸå­åŒ– CSSï¼Œå¿«é€Ÿæ„å»ºç•Œé¢
- ğŸ“± **å“åº”å¼**: å†…ç½®å“åº”å¼è®¾è®¡æ”¯æŒ
- ğŸ¯ **ä¸€è‡´æ€§**: è®¾è®¡ç³»ç»Ÿçº¦æŸï¼Œä¿æŒè§†è§‰ä¸€è‡´
- ğŸš€ **æ€§èƒ½**: æŒ‰éœ€ç”Ÿæˆï¼Œæœ€å°åŒ– CSS ä½“ç§¯

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```tsx
// å“åº”å¼å¡ç‰‡ç»„ä»¶
<div className="bg-white rounded-lg shadow-md p-4 sm:p-6 lg:p-8 
                hover:shadow-lg transition-shadow duration-200">
  <h2 className="text-lg sm:text-xl font-semibold text-gray-900 mb-2">
    ä»»åŠ¡æ ‡é¢˜
  </h2>
  <p className="text-sm text-gray-600 line-clamp-2">
    ä»»åŠ¡æè¿°...
  </p>
</div>
```

### 4. Supabase (åç«¯å³æœåŠ¡)

**é€‰æ‹©ç†ç”±ï¼š**
- ğŸ—„ï¸ **PostgreSQL**: å¼ºå¤§çš„å…³ç³»å‹æ•°æ®åº“
- ğŸ” **å†…ç½®è®¤è¯**: å®Œæ•´çš„ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ
- âš¡ **å®æ—¶åŠŸèƒ½**: WebSocket å®æ—¶æ•°æ®åŒæ­¥
- ğŸ›¡ï¸ **è¡Œçº§å®‰å…¨**: ç»†ç²’åº¦æƒé™æ§åˆ¶
- ğŸš€ **å¼€å‘æ•ˆç‡**: å‡å°‘åç«¯å¼€å‘å·¥ä½œé‡

**åŠŸèƒ½æ¨¡å—ï¼š**
```typescript
// æ•°æ®åº“æ“ä½œ
const { data, error } = await supabase
  .from('todos')
  .select('*')
  .eq('user_id', userId)

// å®æ—¶è®¢é˜…
supabase
  .channel('todos')
  .on('postgres_changes', 
    { event: '*', schema: 'public', table: 'todos' },
    (payload) => console.log('æ•°æ®å˜åŒ–:', payload)
  )
  .subscribe()

// è®¤è¯
const { data, error } = await supabase.auth.signInWithPassword({
  email: 'user@example.com',
  password: 'password'
})
```

### 5. Zustand (çŠ¶æ€ç®¡ç†)

**é€‰æ‹©ç†ç”±ï¼š**
- ğŸª¶ **è½»é‡çº§**: ä½“ç§¯å°ï¼Œæ€§èƒ½å¥½
- ğŸ¯ **ç®€å•æ˜“ç”¨**: API ç®€æ´ï¼Œå­¦ä¹ æˆæœ¬ä½
- ğŸ”§ **TypeScript å‹å¥½**: å®Œç¾çš„ç±»å‹æ”¯æŒ
- ğŸš€ **æ— æ ·æ¿ä»£ç **: ç›¸æ¯” Redux æ›´ç®€æ´

**çŠ¶æ€å®šä¹‰ç¤ºä¾‹ï¼š**
```typescript
interface TodoState {
  todos: Todo[]
  loading: boolean
  addTodo: (todo: TodoInsert) => Promise<void>
  updateTodo: (id: string, updates: TodoUpdate) => Promise<void>
  deleteTodo: (id: string) => Promise<void>
}

const useTodoStore = create<TodoState>((set, get) => ({
  todos: [],
  loading: false,
  addTodo: async (todo) => {
    // å®ç°é€»è¾‘
  },
  // ...å…¶ä»–æ–¹æ³•
}))
```

### 6. React Hook Form + Zod (è¡¨å•å¤„ç†)

**é€‰æ‹©ç†ç”±ï¼š**
- ğŸš€ **é«˜æ€§èƒ½**: æœ€å°åŒ–é‡æ¸²æŸ“
- ğŸ›¡ï¸ **ç±»å‹å®‰å…¨**: ç»“åˆ Zod æä¾›å®Œæ•´ç±»å‹æ¨æ–­
- ğŸ¯ **æ˜“ç”¨æ€§**: ç®€æ´çš„ APIï¼Œä¸°å¯Œçš„åŠŸèƒ½
- ğŸ”§ **éªŒè¯å¼ºå¤§**: å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éªŒè¯

**è¡¨å•ç¤ºä¾‹ï¼š**
```typescript
// Zod éªŒè¯æ¨¡å¼
const todoSchema = z.object({
  title: z.string().min(1, 'æ ‡é¢˜ä¸èƒ½ä¸ºç©º').max(100, 'æ ‡é¢˜è¿‡é•¿'),
  description: z.string().max(500, 'æè¿°è¿‡é•¿').optional()
})

type TodoFormData = z.infer<typeof todoSchema>

// React Hook Form ä½¿ç”¨
const { register, handleSubmit, formState: { errors } } = useForm<TodoFormData>({
  resolver: zodResolver(todoSchema)
})
```

## ğŸ”„ æŠ€æœ¯åä½œæµç¨‹

### æ•°æ®æµå‘

```
ç”¨æˆ·æ“ä½œ â†’ React Hook Form â†’ Zod éªŒè¯ â†’ Zustand çŠ¶æ€æ›´æ–° â†’ Supabase API â†’ PostgreSQL
    â†‘                                                                              â†“
UI æ›´æ–° â† React ç»„ä»¶é‡æ¸²æŸ“ â† Zustand çŠ¶æ€å˜åŒ– â† Supabase Realtime â† æ•°æ®åº“å˜åŒ–é€šçŸ¥
```

### å¼€å‘æµç¨‹

1. **ç±»å‹å®šä¹‰**: ä½¿ç”¨ TypeScript å®šä¹‰æ•°æ®æ¨¡å‹
2. **æ•°æ®åº“è®¾è®¡**: åœ¨ Supabase ä¸­åˆ›å»ºè¡¨å’Œå…³ç³»
3. **çŠ¶æ€ç®¡ç†**: ä½¿ç”¨ Zustand ç®¡ç†åº”ç”¨çŠ¶æ€
4. **ç»„ä»¶å¼€å‘**: ä½¿ç”¨ React + Tailwind æ„å»º UI
5. **è¡¨å•å¤„ç†**: ä½¿ç”¨ React Hook Form + Zod å¤„ç†ç”¨æˆ·è¾“å…¥
6. **æ•°æ®åŒæ­¥**: ä½¿ç”¨ Supabase Realtime å®ç°å®æ—¶æ›´æ–°

## ğŸ¯ æŠ€æœ¯é€‰å‹åŸåˆ™

### 1. å¼€å‘æ•ˆç‡ä¼˜å…ˆ
- é€‰æ‹©æˆç†Ÿç¨³å®šçš„æŠ€æœ¯æ ˆ
- å‡å°‘æ ·æ¿ä»£ç å’Œé…ç½®
- æä¾›è‰¯å¥½çš„å¼€å‘ä½“éªŒ

### 2. æ€§èƒ½è€ƒè™‘
- å®¢æˆ·ç«¯æ€§èƒ½ä¼˜åŒ–
- æœåŠ¡ç«¯æ¸²æŸ“æ”¯æŒ
- ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½

### 3. ç±»å‹å®‰å…¨
- ç«¯åˆ°ç«¯ç±»å‹å®‰å…¨
- ç¼–è¯‘æ—¶é”™è¯¯æ£€æŸ¥
- æ™ºèƒ½ä»£ç æç¤º

### 4. å¯ç»´æŠ¤æ€§
- æ¸…æ™°çš„ä»£ç ç»“æ„
- è‰¯å¥½çš„æ–‡æ¡£å’Œæ³¨é‡Š
- æ˜“äºæµ‹è¯•å’Œè°ƒè¯•

## ğŸ”„ æ›¿ä»£æ–¹æ¡ˆå¯¹æ¯”

| æŠ€æœ¯ç±»åˆ« | å½“å‰é€‰æ‹© | æ›¿ä»£æ–¹æ¡ˆ | é€‰æ‹©ç†ç”± |
|---------|---------|---------|---------|
| React æ¡†æ¶ | Next.js | Remix, Vite | ç”Ÿæ€æˆç†Ÿï¼Œæ€§èƒ½ä¼˜ç§€ |
| çŠ¶æ€ç®¡ç† | Zustand | Redux, Jotai | ç®€å•æ˜“ç”¨ï¼Œæ€§èƒ½å¥½ |
| æ ·å¼æ–¹æ¡ˆ | Tailwind | Styled-components, CSS Modules | å¼€å‘æ•ˆç‡é«˜ |
| åç«¯æœåŠ¡ | Supabase | Firebase, AWS Amplify | å¼€æºï¼ŒåŠŸèƒ½å®Œæ•´ |
| è¡¨å•åº“ | React Hook Form | Formik, Final Form | æ€§èƒ½æœ€ä½³ |
| éªŒè¯åº“ | Zod | Yup, Joi | TypeScript åŸç”Ÿ |

## ğŸ¤” æ€è€ƒé¢˜

1. ä¸ºä»€ä¹ˆé€‰æ‹© Zustand è€Œä¸æ˜¯ Reduxï¼Ÿ
2. Supabase ç›¸æ¯”ä¼ ç»Ÿåç«¯å¼€å‘æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ
3. TypeScript åœ¨å¤§å‹é¡¹ç›®ä¸­çš„ä»·å€¼æ˜¯ä»€ä¹ˆï¼Ÿ
4. å¦‚ä½•è¯„ä¼°ä¸€ä¸ªæŠ€æœ¯æ ˆçš„æˆç†Ÿåº¦ï¼Ÿ

## ğŸ“š æ‰©å±•é˜…è¯»

- [Next.js æ€§èƒ½ä¼˜åŒ–æŒ‡å—](https://nextjs.org/docs/advanced-features/performance)
- [TypeScript æœ€ä½³å®è·µ](https://typescript-eslint.io/docs/)
- [Tailwind CSS è®¾è®¡ç³»ç»Ÿ](https://tailwindcss.com/docs/design-system)
- [Supabase æ¶æ„ä»‹ç»](https://supabase.com/docs/guides/getting-started/architecture)

## ğŸ”— ä¸‹ä¸€æ­¥

äº†è§£æŠ€æœ¯æ ˆåï¼Œä¸‹ä¸€ç« æˆ‘ä»¬å°†è¯¦ç»†ä»‹ç»é¡¹ç›®çš„æ–‡ä»¶ç»“æ„å’Œç»„ç»‡æ–¹å¼ã€‚

[ä¸‹ä¸€ç« ï¼šé¡¹ç›®ç»“æ„ â†’](./03-project-structure.md)
