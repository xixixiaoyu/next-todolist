# 03 - é¡¹ç›®ç»“æ„

æœ¬ç« å°†è¯¦ç»†ä»‹ç»é¡¹ç›®çš„æ–‡ä»¶ç»„ç»‡ç»“æ„ï¼Œè§£é‡Šæ¯ä¸ªç›®å½•å’Œæ–‡ä»¶çš„ä½œç”¨ï¼Œå¸®åŠ©æ‚¨ç†è§£å¦‚ä½•æ„å»ºå¯ç»´æŠ¤çš„å¤§å‹å‰ç«¯é¡¹ç›®ã€‚

## ğŸ¯ å­¦ä¹ ç›®æ ‡

- ç†è§£ç°ä»£å‰ç«¯é¡¹ç›®çš„ç›®å½•ç»“æ„è®¾è®¡åŸåˆ™
- æŒæ¡ Next.js App Router çš„æ–‡ä»¶ç»„ç»‡æ–¹å¼
- å­¦ä¼šæŒ‰åŠŸèƒ½å’Œå±‚æ¬¡ç»„ç»‡ä»£ç 
- äº†è§£é…ç½®æ–‡ä»¶çš„ä½œç”¨å’Œæœ€ä½³å®è·µ

## ğŸ“ å®Œæ•´é¡¹ç›®ç»“æ„

```
next-todolist/
â”œâ”€â”€ ğŸ“ src/                          # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“ app/                      # Next.js App Router é¡µé¢
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ layout.tsx            # æ ¹å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ page.tsx              # é¦–é¡µ
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ globals.css           # å…¨å±€æ ·å¼
â”‚   â”‚   â”œâ”€â”€ ğŸ“ auth/                 # è®¤è¯ç›¸å…³é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ page.tsx          # ç™»å½•/æ³¨å†Œé¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ callback/         # è®¤è¯å›è°ƒ
â”‚   â”‚   â”‚       â””â”€â”€ ğŸ“„ page.tsx      # å›è°ƒå¤„ç†é¡µé¢
â”‚   â”‚   â””â”€â”€ ğŸ“„ middleware.ts         # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ ğŸ“ components/               # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“ ui/                   # é€šç”¨ UI ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ button.tsx        # æŒ‰é’®ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ input.tsx         # è¾“å…¥æ¡†ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ card.tsx          # å¡ç‰‡ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ label.tsx         # æ ‡ç­¾ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ loading.tsx       # åŠ è½½ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ toast.tsx         # é€šçŸ¥ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ error-boundary.tsx # é”™è¯¯è¾¹ç•Œ
â”‚   â”‚   â”œâ”€â”€ ğŸ“ auth/                 # è®¤è¯ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ login-form.tsx    # ç™»å½•è¡¨å•
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ register-form.tsx # æ³¨å†Œè¡¨å•
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ auth-provider.tsx # è®¤è¯æä¾›è€…
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ protected-route.tsx # è·¯ç”±ä¿æŠ¤
â”‚   â”‚   â”œâ”€â”€ ğŸ“ todo/                 # Todo åŠŸèƒ½ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ todo-form.tsx     # Todo è¡¨å•
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ todo-item.tsx     # Todo é¡¹ç›®
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ todo-list.tsx     # Todo åˆ—è¡¨
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ todo-filters.tsx  # è¿‡æ»¤å™¨
â”‚   â”‚   â””â”€â”€ ğŸ“ layout/               # å¸ƒå±€ç»„ä»¶
â”‚   â”‚       â””â”€â”€ ğŸ“„ header.tsx        # é¡µé¢å¤´éƒ¨
â”‚   â”œâ”€â”€ ğŸ“ lib/                      # å·¥å…·åº“å’Œé…ç½®
â”‚   â”‚   â”œâ”€â”€ ğŸ“ supabase/             # Supabase é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ client.ts         # å®¢æˆ·ç«¯é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ server.ts         # æœåŠ¡ç«¯é…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ middleware.ts     # ä¸­é—´ä»¶é…ç½®
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ utils.ts              # é€šç”¨å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ ğŸ“„ validations.ts        # è¡¨å•éªŒè¯è§„åˆ™
â”‚   â”œâ”€â”€ ğŸ“ store/                    # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ auth.ts               # è®¤è¯çŠ¶æ€
â”‚   â”‚   â””â”€â”€ ğŸ“„ todos.ts              # Todo çŠ¶æ€
â”‚   â”œâ”€â”€ ğŸ“ types/                    # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ ğŸ“„ index.ts              # å…¨å±€ç±»å‹
â”‚   â”œâ”€â”€ ğŸ“ hooks/                    # è‡ªå®šä¹‰ React Hooks
â”‚   â””â”€â”€ ğŸ“ __tests__/                # æµ‹è¯•æ–‡ä»¶
â”‚       â””â”€â”€ ğŸ“ components/           # ç»„ä»¶æµ‹è¯•
â”‚           â””â”€â”€ ğŸ“ ui/
â”‚               â””â”€â”€ ğŸ“„ button.test.tsx
â”œâ”€â”€ ğŸ“ supabase/                     # Supabase ç›¸å…³æ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“ migrations/               # æ•°æ®åº“è¿ç§»
â”‚   â”‚   â””â”€â”€ ğŸ“„ 001_initial_schema.sql
â”‚   â””â”€â”€ ğŸ“„ config.toml               # Supabase é…ç½®
â”œâ”€â”€ ğŸ“ docs/                         # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ ğŸ“ public/                       # é™æ€èµ„æº
â”œâ”€â”€ ğŸ“„ package.json                  # é¡¹ç›®é…ç½®
â”œâ”€â”€ ğŸ“„ tsconfig.json                 # TypeScript é…ç½®
â”œâ”€â”€ ğŸ“„ tailwind.config.ts            # Tailwind é…ç½®
â”œâ”€â”€ ğŸ“„ next.config.js                # Next.js é…ç½®
â”œâ”€â”€ ğŸ“„ jest.config.js                # Jest é…ç½®
â”œâ”€â”€ ğŸ“„ jest.setup.js                 # Jest è®¾ç½®
â”œâ”€â”€ ğŸ“„ .env.local                    # ç¯å¢ƒå˜é‡
â”œâ”€â”€ ğŸ“„ .env.example                  # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ ğŸ“„ .gitignore                    # Git å¿½ç•¥æ–‡ä»¶
â””â”€â”€ ğŸ“„ README.md                     # é¡¹ç›®è¯´æ˜
```

## ğŸ—ï¸ ç›®å½•è®¾è®¡åŸåˆ™

### 1. æŒ‰åŠŸèƒ½åˆ†ç»„ (Feature-based)

```
components/
â”œâ”€â”€ auth/          # è®¤è¯ç›¸å…³çš„æ‰€æœ‰ç»„ä»¶
â”œâ”€â”€ todo/          # Todo åŠŸèƒ½çš„æ‰€æœ‰ç»„ä»¶
â”œâ”€â”€ ui/            # é€šç”¨ UI ç»„ä»¶
â””â”€â”€ layout/        # å¸ƒå±€ç›¸å…³ç»„ä»¶
```

**ä¼˜åŠ¿ï¼š**
- åŠŸèƒ½å†…èšï¼Œç›¸å…³ä»£ç é›†ä¸­
- æ˜“äºç»´æŠ¤å’Œé‡æ„
- å›¢é˜Ÿåä½œæ—¶å‡å°‘å†²çª

### 2. æŒ‰å±‚æ¬¡åˆ†ç¦» (Layer-based)

```
src/
â”œâ”€â”€ app/           # é¡µé¢å±‚ (Presentation)
â”œâ”€â”€ components/    # ç»„ä»¶å±‚ (Components)
â”œâ”€â”€ store/         # çŠ¶æ€å±‚ (State)
â”œâ”€â”€ lib/           # å·¥å…·å±‚ (Utils)
â””â”€â”€ types/         # ç±»å‹å±‚ (Types)
```

**ä¼˜åŠ¿ï¼š**
- èŒè´£æ¸…æ™°ï¼Œæ˜“äºç†è§£
- ä¾¿äºä»£ç å¤ç”¨
- ç¬¦åˆè½¯ä»¶æ¶æ„åŸåˆ™

## ğŸ“‚ æ ¸å¿ƒç›®å½•è¯¦è§£

### src/app/ - é¡µé¢è·¯ç”±

Next.js App Router ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿè·¯ç”±ï¼š

```
app/
â”œâ”€â”€ layout.tsx          # æ ¹å¸ƒå±€ (å¿…éœ€)
â”œâ”€â”€ page.tsx            # é¦–é¡µ /
â”œâ”€â”€ loading.tsx         # åŠ è½½é¡µé¢
â”œâ”€â”€ error.tsx           # é”™è¯¯é¡µé¢
â”œâ”€â”€ not-found.tsx       # 404 é¡µé¢
â”œâ”€â”€ auth/
â”‚   â”œâ”€â”€ page.tsx        # /auth
â”‚   â””â”€â”€ callback/
â”‚       â””â”€â”€ page.tsx    # /auth/callback
â””â”€â”€ dashboard/
    â”œâ”€â”€ layout.tsx      # åµŒå¥—å¸ƒå±€
    â””â”€â”€ page.tsx        # /dashboard
```

**å…³é”®æ–‡ä»¶è¯´æ˜ï¼š**
- `layout.tsx`: å®šä¹‰é¡µé¢å¸ƒå±€ï¼Œå¯åµŒå¥—
- `page.tsx`: é¡µé¢ç»„ä»¶ï¼Œå¯¹åº”è·¯ç”±
- `loading.tsx`: åŠ è½½çŠ¶æ€é¡µé¢
- `error.tsx`: é”™è¯¯å¤„ç†é¡µé¢

### src/components/ - ç»„ä»¶åº“

æŒ‰åŠŸèƒ½å’Œå¤ç”¨æ€§ç»„ç»‡ç»„ä»¶ï¼š

```
components/
â”œâ”€â”€ ui/                 # é€šç”¨ UI ç»„ä»¶ (é«˜å¤ç”¨)
â”‚   â”œâ”€â”€ button.tsx      # æŒ‰é’®
â”‚   â”œâ”€â”€ input.tsx       # è¾“å…¥æ¡†
â”‚   â””â”€â”€ card.tsx        # å¡ç‰‡
â”œâ”€â”€ auth/               # è®¤è¯åŠŸèƒ½ç»„ä»¶ (ä¸­ç­‰å¤ç”¨)
â”‚   â”œâ”€â”€ login-form.tsx  # ç™»å½•è¡¨å•
â”‚   â””â”€â”€ auth-provider.tsx # è®¤è¯ä¸Šä¸‹æ–‡
â””â”€â”€ todo/               # Todo åŠŸèƒ½ç»„ä»¶ (ä½å¤ç”¨)
    â”œâ”€â”€ todo-form.tsx   # Todo è¡¨å•
    â””â”€â”€ todo-list.tsx   # Todo åˆ—è¡¨
```

**ç»„ä»¶åˆ†ç±»åŸåˆ™ï¼š**
- **ui/**: æ— ä¸šåŠ¡é€»è¾‘çš„çº¯ UI ç»„ä»¶
- **åŠŸèƒ½æ¨¡å—/**: åŒ…å«ä¸šåŠ¡é€»è¾‘çš„åŠŸèƒ½ç»„ä»¶
- **layout/**: å¸ƒå±€ç›¸å…³ç»„ä»¶

### src/lib/ - å·¥å…·åº“

å­˜æ”¾å·¥å…·å‡½æ•°å’Œç¬¬ä¸‰æ–¹åº“é…ç½®ï¼š

```
lib/
â”œâ”€â”€ supabase/           # Supabase é…ç½®
â”‚   â”œâ”€â”€ client.ts       # æµè§ˆå™¨ç«¯å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ server.ts       # æœåŠ¡ç«¯å®¢æˆ·ç«¯
â”‚   â””â”€â”€ middleware.ts   # ä¸­é—´ä»¶é…ç½®
â”œâ”€â”€ utils.ts            # é€šç”¨å·¥å…·å‡½æ•°
â””â”€â”€ validations.ts      # è¡¨å•éªŒè¯è§„åˆ™
```

**è®¾è®¡åŸåˆ™ï¼š**
- çº¯å‡½æ•°ï¼Œæ— å‰¯ä½œç”¨
- å•ä¸€èŒè´£ï¼ŒåŠŸèƒ½æ˜ç¡®
- æ˜“äºæµ‹è¯•å’Œå¤ç”¨

### src/store/ - çŠ¶æ€ç®¡ç†

ä½¿ç”¨ Zustand ç®¡ç†å…¨å±€çŠ¶æ€ï¼š

```
store/
â”œâ”€â”€ auth.ts             # è®¤è¯çŠ¶æ€
â”œâ”€â”€ todos.ts            # Todo çŠ¶æ€
â””â”€â”€ ui.ts               # UI çŠ¶æ€ (å¯é€‰)
```

**çŠ¶æ€è®¾è®¡åŸåˆ™ï¼š**
- æŒ‰åŠŸèƒ½æ¨¡å—åˆ†ç¦»çŠ¶æ€
- åŒ…å«æ•°æ®å’Œæ“ä½œæ–¹æ³•
- ä¿æŒçŠ¶æ€æœ€å°åŒ–

### src/types/ - ç±»å‹å®šä¹‰

é›†ä¸­ç®¡ç† TypeScript ç±»å‹ï¼š

```
types/
â”œâ”€â”€ index.ts            # å¯¼å‡ºæ‰€æœ‰ç±»å‹
â”œâ”€â”€ database.ts         # æ•°æ®åº“ç±»å‹
â”œâ”€â”€ api.ts              # API ç±»å‹
â””â”€â”€ components.ts       # ç»„ä»¶ç±»å‹
```

## ğŸ”§ é…ç½®æ–‡ä»¶è¯´æ˜

### package.json - é¡¹ç›®é…ç½®

```json
{
  "name": "next-todolist",
  "version": "0.1.0",
  "scripts": {
    "dev": "next dev --turbopack",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "test": "jest",
    "type-check": "tsc --noEmit"
  },
  "dependencies": {
    // ç”Ÿäº§ä¾èµ–
  },
  "devDependencies": {
    // å¼€å‘ä¾èµ–
  }
}
```

### tsconfig.json - TypeScript é…ç½®

```json
{
  "compilerOptions": {
    "strict": true,
    "noEmit": true,
    "jsx": "preserve",
    "paths": {
      "@/*": ["./src/*"]    // è·¯å¾„åˆ«å
    }
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx"],
  "exclude": ["node_modules"]
}
```

### tailwind.config.ts - æ ·å¼é…ç½®

```typescript
import type { Config } from "tailwindcss";

const config: Config = {
  content: [
    "./src/**/*.{js,ts,jsx,tsx,mdx}",  // æ‰«æè·¯å¾„
  ],
  theme: {
    extend: {
      // è‡ªå®šä¹‰ä¸»é¢˜
    },
  },
  plugins: [],
};
```

## ğŸ“‹ æ–‡ä»¶å‘½åè§„èŒƒ

### ç»„ä»¶æ–‡ä»¶

```
PascalCase.tsx          # React ç»„ä»¶
kebab-case.tsx          # å¤šå•è¯ç»„ä»¶
index.tsx               # ç›®å½•å…¥å£æ–‡ä»¶
```

### å·¥å…·æ–‡ä»¶

```
camelCase.ts            # å·¥å…·å‡½æ•°
kebab-case.ts           # å¤šå•è¯æ–‡ä»¶
constants.ts            # å¸¸é‡æ–‡ä»¶
types.ts                # ç±»å‹å®šä¹‰
```

### æµ‹è¯•æ–‡ä»¶

```
Component.test.tsx      # ç»„ä»¶æµ‹è¯•
utils.test.ts           # å·¥å…·æµ‹è¯•
__mocks__/              # Mock æ–‡ä»¶
```

## ğŸ¯ æœ€ä½³å®è·µ

### 1. ä¿æŒç›®å½•æµ…å±‚

```
âŒ è¿‡æ·±åµŒå¥—
components/ui/forms/inputs/text/TextInput.tsx

âœ… åˆç†å±‚æ¬¡
components/ui/text-input.tsx
```

### 2. ä½¿ç”¨ index.ts ç®€åŒ–å¯¼å…¥

```typescript
// components/ui/index.ts
export { Button } from './button'
export { Input } from './input'
export { Card } from './card'

// ä½¿ç”¨æ—¶
import { Button, Input, Card } from '@/components/ui'
```

### 3. æŒ‰åŠŸèƒ½ç»„ç»‡ï¼Œè€ŒéæŠ€æœ¯

```
âŒ æŒ‰æŠ€æœ¯åˆ†ç»„
â”œâ”€â”€ hooks/
â”œâ”€â”€ components/
â””â”€â”€ utils/

âœ… æŒ‰åŠŸèƒ½åˆ†ç»„
â”œâ”€â”€ auth/
â”œâ”€â”€ todo/
â””â”€â”€ shared/
```

## ğŸ¤” æ€è€ƒé¢˜

1. ä¸ºä»€ä¹ˆè¦æŒ‰åŠŸèƒ½è€Œä¸æ˜¯æŒ‰æŠ€æœ¯ç»„ç»‡ä»£ç ï¼Ÿ
2. ä»€ä¹ˆæ—¶å€™åº”è¯¥åˆ›å»ºæ–°çš„ç›®å½•ï¼Ÿ
3. å¦‚ä½•å¹³è¡¡ä»£ç å¤ç”¨å’ŒåŠŸèƒ½å†…èšï¼Ÿ
4. å¤§å‹é¡¹ç›®ä¸­å¦‚ä½•é¿å…å¾ªç¯ä¾èµ–ï¼Ÿ

## ğŸ“š æ‰©å±•é˜…è¯»

- [Next.js App Router æ–‡æ¡£](https://nextjs.org/docs/app)
- [React é¡¹ç›®ç»“æ„æœ€ä½³å®è·µ](https://react.dev/learn/thinking-in-react)
- [TypeScript é¡¹ç›®é…ç½®æŒ‡å—](https://www.typescriptlang.org/docs/handbook/tsconfig-json.html)

## ğŸ”— ä¸‹ä¸€æ­¥

äº†è§£é¡¹ç›®ç»“æ„åï¼Œä¸‹ä¸€ç« æˆ‘ä»¬å°†å¼€å§‹é…ç½® Supabase æ•°æ®åº“ã€‚

[ä¸‹ä¸€ç« ï¼šSupabase è®¾ç½® â†’](./04-supabase-setup.md)
